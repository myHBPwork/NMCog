!function(t){var i={states:{fixedClass:"ixp-sticky-container-fixed"},placeholderSelector:"[data-ixp-sticky-placeholder]",extensibility:{commands:{status:":status"},events:{status:":status"}}},s=t.components.dependencies._,e=t.components.dependencies.Modernizr;i=s.defaults(i,t.components.constants);var n={getScaffolding:function(t,i,s){return{style:{customClass:i.getDefaultTheme("stickycontainer")}}},togglePlaceholder:function(t,s){var e=t.next(i.placeholderSelector),n=(t.innerHeight()||1)+"px";if(s){if(!e.length){var o=t.data("liveball-rmw-root");t.after('<div data-ixp-sticky-placeholder="'+o+'"></div>'),e=t.next(i.placeholderSelector)}e.show().css({height:n})}else e.length&&e.hide()},rgbSearch:/.*?(\d+).*?(\d+).*?(\d+)/i};t.components.register("sticky_container",{stickyWrapperCss:{},stickyContainerCss:{},transition:{prop:"background",duration:"",timing:""},initialize:function(t){return this.inStudio?!0:(this.$window=this.$(window),this.$document=this.$(document),this._setStickyBackgroundTransitionStyle(this.sticky_background_transition),this._setStickyBackgroundTransitionDuration(this.sticky_background_transition_duration),this._setStickyTopOffset(this.sticky_top_offset),this._setStickyWidth(this.sticky_width),void this._setStickyHeight(this.sticky_height))},onDocumentReady:function(){return this.inStudio?!0:(this._setStickyBackground(this.sticky_background),this._setStickyStyles(),this._setStickyTracking(this.sticky_trigger),this.$window.on("resize"+this.eventNamespace,s.throttle(s.bind(this.onResize,this),100)),!0)},onScroll:function(){this._toggleSticky()},onResize:function(){this._positionSticky()},isSticking:function(){return this.$el.hasClass(i.states.fixedClass)},_toggleSticky:function(){var t=this.isSticking(),s=t?this.$el.next(i.placeholderSelector):this.$el,e=s[0].getBoundingClientRect().top||0,o=parseInt(this.stickyWrapperCss.top,10)||0,a=o>e;n.togglePlaceholder(this.$el,a),this.$el.toggleClass(i.states.fixedClass,a),this._positionSticky(),this.inStudio&&this.studioApp&&t!=a&&this.studioApp.componentsManager.trigger("rmw:reflowed",{instanceId:this.instanceId})},_positionSticky:function(){var t=this.isSticking(),i=this.stickyContainerCss["max-width"];if(!t||!i)return void this.$el.css("left",0);i=parseInt(i,10);var s=this.$(window).outerWidth();if(i>=s)this.$el.css("left",0);else{var e=s-i;this.$el.css("left",Math.floor(e/2))}this.inStudio&&this.studioApp&&this.studioApp.componentsManager.trigger("rmw:reflowed",{instanceId:this.instanceId})},_setStickyStyles:function(){var t=[],s="#"+this.$el.attr("id"),e={selector:s,declarations:[]};if(this.$.each(this.stickyWrapperCss,function(t,i){""!==i&&e.declarations.push({property:t,value:i})}),this.stickyContainerCss.background&&this.transition.timing){var n=[this.transition.prop,this.transition.duration,this.transition.timing].join(" ");e.declarations.push({property:"-webkit-transition",value:n}),e.declarations.push({property:"-moz-transition",value:n}),e.declarations.push({property:"-ms-transition",value:n}),e.declarations.push({property:"-o-transition",value:n}),e.declarations.push({property:"transition",value:n})}t.push(e);var o={selector:s+"."+i.states.fixedClass,declarations:[]};this.$.each(this.stickyContainerCss,function(t,i){""!==i&&o.declarations.push({property:t,value:i})}),t.push(o),this.addOrUpdateStyleBlock(t)},_afterParamChange:function(){this.initialized&&(this._setStickyStyles(),"scroll"===this.sticky_trigger?this._toggleSticky():this._positionSticky())},_setStickyTracking:function(t){t=t||"scroll",this.$el.removeClass(i.states.fixedClass),this.$window.off("scroll"+this.eventNamespace),"scroll"===t?(this.$window.on("scroll"+this.eventNamespace,s.throttle(s.bind(this.onScroll,this),100)),s.defer(s.bind(this._toggleSticky,this))):(this.$el.addClass(i.states.fixedClass),this._positionSticky())},_setStickyBackground:function(t){if(t||null==this.stickyContainerCss.background){if(t){if(e.rgba===!1&&-1!==t.indexOf("rgba")){var i=n.rgbSearch.exec(t);t="rgb("+i.slice(1).join(",")+")"}this.stickyContainerCss.background=t+" !important"}}else this.stickyContainerCss.background="";this._afterParamChange()},_setStickyBackgroundTransitionStyle:function(t){t&&"none"!==t?this.transition.timing=t:this.transition.timing=null,this._afterParamChange()},_setStickyBackgroundTransitionDuration:function(t){t?this.transition.duration=t+"ms":this.transition.duration="100ms",this._afterParamChange()},_setStickyTopOffset:function(t){null==t||""===t?this.stickyWrapperCss.top=0:this.stickyWrapperCss.top=t+"px",this._afterParamChange()},_setStickyWidth:function(t){null==t||""===t?this.stickyContainerCss["max-width"]=null:this.stickyContainerCss["max-width"]=t+"px",this._afterParamChange()},_setStickyHeight:function(t){null==t||""===t?this.stickyContainerCss.height="":this.stickyContainerCss.height=t+"px",this._afterParamChange()},disallowedChildrenTypes:function(){return["sticky_container"]},onGetScaffolding:function(t,i,s){return n.getScaffolding(t,i,s)},onGetCommandMap:function(){var t={};return t[i.extensibility.commands.status]={fn:this._onCommandStatus},t},_onCommandStatus:function(t){var s=this.isSticking(),e=s?this.sticky_top_offset:0,n=this.$el.outerWidth(),o=this.$el.outerHeight(),a=this.$el.offset().top,r={isSticking:s,sticksTo:"top",offset:e,width:n,height:o,scrollTop:a};this.triggerExtensibility(i.extensibility.events.status,r,{done:t&&t.done})}})}(window.ixp.runtime);
//# sourceMappingURL=sticky_container.min.js
//# sourceMappingURL=sticky_container.min.js.map